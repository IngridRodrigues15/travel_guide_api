<h3>Escolha os lugares que prefere</h3>



    <div class="form-group">


    <table class="display table table-striped table-hover table-bordered dt-responsive responsive nowrap" cellspacing="0" width="100%">

    <tbody id="sortable">
    <% @categories.each_with_index do |category, index| %>

      <tr id="order_<%= index %>" data-category-id="<%= category.id %>" data-category-name="<%= category.name %>">
        <td><%= category.name %></td>
      </tr>
    <% end %>
      

    </tbody>

    <button class='btn' id='submit-preferences'> Continuar >> </button>

    </div>



  <script>
  $(function() {
    $('#sortable').sortable({
      update: function( event, ui ) {

        var order = $("#sortable").sortable('serialize');
        var data = [];
        $("#sortable tr").each(function(i, el) {
          data.push({
            order: $(el).attr("id"),
            id: $(el).attr("data-category-id"),
            name: $(el).attr("data-category-name")
          });
        });

        $( "#submit-preferences" ).click(function() {
          $.ajax({
              data: {categories: data },
              dataType:'json',
              type: 'POST',
              url: "/preferences"
          });
        });
      }
    });
  });
  </script>